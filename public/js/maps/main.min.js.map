{"version":3,"sources":["main.js"],"names":["document","addEventListener","anchors","querySelectorAll","length","forEach","anchor","e","preventDefault","window","location","hash","querySelector","scrollIntoView","behavior","selection","start","end","active","clickCount","setCellFocus","td","parent","cell","classList","remove","add","setEditableCellEvent","makeCellEditable","tagName","rowIndex","dataset","row","columnIndex","column","alert","resetSelection","createTable","rowsInput","columnsInput","menuCreate","menuPanel","rows","value","columns","table","createElement","thead","headerRow","tbody","isNaN","innerHTML","th","textContent","append","tr","toString","setAttribute","removeAttribute","currentText","input","focus","key","blur","createRowHandler","focusedCell","closest","newRow","children","insertAdjacentElement","createColumnHandler","focusedCellIndex","cellIndex","cellSelected","newCell","container","menuCreateTable","createButton","addRowButton","addColumnButton"],"mappings":"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","file":"../main.min.js","sourcesContent":["/* Common */\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\tconst anchors = document.querySelectorAll('.anchor');\r\n\r\n\tif (anchors && anchors.length > 0) {\r\n\t\tanchors.forEach(anchor => {\r\n\t\t\tanchor.addEventListener('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif (window.location.hash) {\r\n\t\t\t\t\tdocument.querySelector(window.location.hash).scrollIntoView({\r\n\t\t\t\t\t\tbehavior: 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n});\r\nlet selection = {\r\n\tstart: null,\r\n\tend: null,\r\n\tactive: false,\r\n\tclickCount: 0\r\n};\r\n\r\nconst setCellFocus = (td, parent) => {\r\n\tconst cells = parent.querySelectorAll(\"td, th\");\r\n\r\n\tcells.forEach(cell => cell.classList.remove(\"focused\"));\r\n\ttd.classList.add(\"focused\");\r\n}\r\n\r\n// Событие редактирования ячейки\r\nconst setEditableCellEvent = (cell, parent) => {\r\n\tcell.addEventListener(\"click\", () => {\r\n\t\tif (selection.active) { // В обычном режиме\r\n\t\t\tsetCellFocus(cell, parent);\r\n\t\t\tmakeCellEditable(cell);\r\n\t\t} else if (cell.tagName === \"TD\") { // В режиме объединения/разделения ячеек\r\n\t\t\tconst rowIndex = +cell.dataset.row;\r\n\t\t\tconst columnIndex = +cell.dataset.column;\r\n\r\n\t\t\tswitch (selection.clickCount) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tselection.start = {rowIndex, columnIndex};\r\n\t\t\t\t\tselection.clickCount += 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (selection.start.rowIndex !== +cell.dataset.row ||\r\n\t\t\t\t\t\tselection.start.columnIndex !== +cell.dataset.column\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tselection.end = {rowIndex, columnIndex};\r\n\t\t\t\t\t\tselection.clickCount += 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(\"Выделите вторую ячейку для объединения\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tresetSelection();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nconst createTable = (parent, rowsInput, columnsInput, menuCreate, menuPanel) => {\r\n\tconst rows = +rowsInput.value;\r\n\tconst columns = +columnsInput.value;\r\n\tconst table = document.createElement(\"table\"); // Элемент таблицы\r\n\tconst thead = document.createElement(\"thead\"); // Заголовок таблицы\r\n\tconst headerRow = document.createElement(\"tr\"); // Строка для заголовка таблицы\r\n\tconst tbody = document.createElement(\"tbody\"); // Тело таблицы\r\n\r\n\tif (isNaN(rows) || isNaN(columns) || rows < 1 || columns < 1) {\r\n\t\talert(\"Введите правильное количество строк и столбцов от 1\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tparent.innerHTML = \"\";\r\n\r\n\t// Создание заголовка таблицы thead\r\n\tfor (let cell = 0; cell < columns; cell++) {\r\n\t\tconst th = document.createElement(\"th\");\r\n\r\n\t\tth.textContent = `Заголовок ${cell+1}`;\r\n\t\t//th.addEventListener(\"click\", sortTable(i));\r\n\t\theaderRow.append(th);\r\n\r\n\t\tsetEditableCellEvent(th, parent);\r\n\t}\r\n\r\n\tthead.append(headerRow);\r\n\ttable.append(thead);\r\n\r\n\t// Создание тела таблицы tbody\r\n\tfor (let row = 0; row < rows - 1; row++) {\r\n\t\tconst tr = document.createElement(\"tr\");\r\n\r\n\t\tfor (let cell = 0; cell < columns; cell++) {\r\n\t\t\tconst td = document.createElement(\"td\");\r\n\r\n\t\t\t// Добавляем фокус первой ячейке в первой строке\r\n\t\t\tif (row === 0 && cell === 0) {\r\n\t\t\t\tsetCellFocus(td, parent);\r\n\t\t\t}\r\n\r\n\t\t\ttd.textContent = `Строка ${row+1}, Ячейка ${cell+1}`;\r\n\t\t\ttd.dataset.row = row.toString();\r\n\t\t\ttd.dataset.column = cell.toString();\r\n\t\t\ttr.append(td);\r\n\r\n\t\t\tsetEditableCellEvent(td, parent);\r\n\t\t}\r\n\r\n\t\ttbody.append(tr);\r\n\t}\r\n\r\n\ttable.append(tbody);\r\n\tparent.append(table);\r\n\r\n\tmenuCreate.setAttribute(\"hidden\", true);\r\n\tmenuPanel.removeAttribute(\"hidden\");\r\n\r\n\t// Создание событий\r\n\t/*const newTable = parent.querySelector(\"table\");\r\n\r\n\tnewTable.addEventListener(\"click\", (e) => {\r\n\r\n\t});*/\r\n}\r\n\r\nconst makeCellEditable = (td) => {\r\n\tconst currentText = td.innerHTML;\r\n\r\n\ttd.innerHTML = `<input type=\"text\" value=\"${currentText}\" style=\"width: 100%;\">`;\r\n\r\n\tconst input = td.querySelector(\"input\");\r\n\tinput.focus();\r\n\r\n\tinput.addEventListener(\"blur\", () => {\r\n\t\ttd.innerHTML = input.value;\r\n\t});\r\n\r\n\tinput.addEventListener(\"keypress\", (e) => {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tinput.blur();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nconst createRowHandler = (table) => {\r\n\tconst focusedCell = table.querySelector(\".focused\");\r\n\r\n\tif (focusedCell) {\r\n\t\tconst row = focusedCell.closest(\"tr\");\r\n\t\tconst newRow = document.createElement(\"tr\");\r\n\r\n\t\t[...row.children].forEach(() => {\r\n\t\t\tconst td = document.createElement(\"td\");\r\n\r\n\t\t\tsetEditableCellEvent(td, table);\r\n\r\n\t\t\tnewRow.append(td);\r\n\t\t})\r\n\r\n\t\trow.insertAdjacentElement(\"afterend\", newRow);\r\n\t}\r\n}\r\n\r\nconst createColumnHandler = (table) => {\r\n\tconst focusedCellIndex = table.querySelector(\".focused\").cellIndex;\r\n\r\n\ttable.querySelectorAll(\"tr\").forEach(tr => {\r\n\t\tconst cellSelected = tr.querySelectorAll(\"td, th\")[focusedCellIndex];\r\n\t\tconst newCell = cellSelected.tagName === \"TD\" ?\r\n\t\t\tdocument.createElement(\"td\") :\r\n\t\t\tdocument.createElement(\"th\");\r\n\r\n\t\tsetEditableCellEvent(newCell, table);\r\n\r\n\t\tcellSelected.insertAdjacentElement(\"afterend\", newCell);\r\n\t});\r\n}\r\n\r\nconst resetSelection = () => {\r\n\tselection = {\r\n\t\tstart: null,\r\n\t\tend: null,\r\n\t\tactive: false,\r\n\t\tclickCount: 0\r\n\t}\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\tconst container = document.querySelector(\".table__wrapper\");\r\n\tlet table = null;\r\n\tconst menuCreateTable = document.querySelector(\".table__create\");\r\n\tconst menuPanel = document.querySelector(\".table__panel\");\r\n\tconst rowsInput = menuCreateTable.querySelector(\".table__num-rows\");\r\n\tconst columnsInput = menuCreateTable.querySelector(\".table__num-columns\");\r\n\tconst createButton = menuCreateTable.querySelector(\".js-create-table\");\r\n\tconst addRowButton = menuPanel.querySelector(\".js-create-row\");\r\n\tconst addColumnButton = menuPanel.querySelector(\".js-create-column\");\r\n\tconst joinCellsButton = menuPanel.querySelector(\".js-join-cells\");\r\n\r\n\tcreateButton.addEventListener(\"click\", () => {\r\n\t\tcreateTable(container, rowsInput, columnsInput, menuCreateTable, menuPanel);\r\n\t\ttable = container.querySelector(\".table__wrapper table\");\r\n\r\n\t\taddRowButton.addEventListener(\"click\", (e) => createRowHandler(table));\r\n\t\taddColumnButton.addEventListener(\"click\", (e) => createColumnHandler(table));\r\n\t});\r\n});"]}