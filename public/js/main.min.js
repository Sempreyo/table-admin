document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".anchor");e&&e.length>0&&e.forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),window.location.hash&&document.querySelector(window.location.hash).scrollIntoView({behavior:"smooth"})}))})});let selection={start:null,end:null,active:!1,clickCount:0};const setCellFocus=(e,t)=>{t.querySelectorAll("td, th").forEach(e=>e.classList.remove("focused")),e.classList.add("focused")},setEditableCellEvent=(e,t)=>{e.addEventListener("click",()=>{if(selection.active)setCellFocus(e,t),makeCellEditable(e);else if("TD"===e.tagName){const t=+e.dataset.row,n=+e.dataset.column;switch(selection.clickCount){case 0:selection.start={rowIndex:t,columnIndex:n},selection.clickCount+=1;break;case 1:selection.start.rowIndex!==+e.dataset.row||selection.start.columnIndex!==+e.dataset.column?(selection.end={rowIndex:t,columnIndex:n},selection.clickCount+=1):alert("Выделите вторую ячейку для объединения")}resetSelection()}})},createTable=(e,t,n,l,c)=>{const o=+t.value,r=+n.value,a=document.createElement("table"),d=document.createElement("thead"),s=document.createElement("tr"),u=document.createElement("tbody");if(isNaN(o)||isNaN(r)||o<1||r<1)alert("Введите правильное количество строк и столбцов от 1");else{e.innerHTML="";for(let t=0;t<r;t++){const n=document.createElement("th");n.textContent="Заголовок "+(t+1),s.append(n),setEditableCellEvent(n,e)}d.append(s),a.append(d);for(let t=0;t<o-1;t++){const n=document.createElement("tr");for(let l=0;l<r;l++){const c=document.createElement("td");0===t&&0===l&&setCellFocus(c,e),c.textContent=`Строка ${t+1}, Ячейка ${l+1}`,c.dataset.row=t.toString(),c.dataset.column=l.toString(),n.append(c),setEditableCellEvent(c,e)}u.append(n)}a.append(u),e.append(a),l.setAttribute("hidden",!0),c.removeAttribute("hidden")}},makeCellEditable=e=>{const t=e.innerHTML;e.innerHTML=`<input type="text" value="${t}" style="width: 100%;">`;const n=e.querySelector("input");n.focus(),n.addEventListener("blur",()=>{e.innerHTML=n.value}),n.addEventListener("keypress",e=>{"Enter"===e.key&&n.blur()})},createRowHandler=e=>{const t=e.querySelector(".focused");if(t){const n=t.closest("tr"),l=document.createElement("tr");[...n.children].forEach(()=>{const t=document.createElement("td");setEditableCellEvent(t,e),l.append(t)}),n.insertAdjacentElement("afterend",l)}},createColumnHandler=e=>{const t=e.querySelector(".focused").cellIndex;e.querySelectorAll("tr").forEach(n=>{const l=n.querySelectorAll("td, th")[t],c="TD"===l.tagName?document.createElement("td"):document.createElement("th");setEditableCellEvent(c,e),l.insertAdjacentElement("afterend",c)})},resetSelection=()=>{selection={start:null,end:null,active:!1,clickCount:0}};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".table__wrapper");let t=null;const n=document.querySelector(".table__create"),l=document.querySelector(".table__panel"),c=n.querySelector(".table__num-rows"),o=n.querySelector(".table__num-columns"),r=n.querySelector(".js-create-table"),a=l.querySelector(".js-create-row"),d=l.querySelector(".js-create-column");l.querySelector(".js-join-cells");r.addEventListener("click",()=>{createTable(e,c,o,n,l),t=e.querySelector(".table__wrapper table"),a.addEventListener("click",e=>createRowHandler(t)),d.addEventListener("click",e=>createColumnHandler(t))})});
//# sourceMappingURL=maps/main.min.js.map
